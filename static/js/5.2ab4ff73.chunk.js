(this.webpackJsonplovinlocal=this.webpackJsonplovinlocal||[]).push([[5],{332:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return I}));var o,s,a,c=n(22),l=n.n(c),r=n(31),i=n(8),d=n(3),p=n(1),u=n(28),j=n(14),b=n(4),h=n(5),g=n(16),m=n(2),O=n(324),f=h.b.CREDENTIAL.GOOGLE_MAP.API_KEY,x=function(e,t){return new Promise((function(n,o){fetch("".concat("https://maps.googleapis.com/maps/api/geocode/json","?latlng=").concat(e,",").concat(t,"&key=").concat(f),{method:"get",headers:{Accept:"application/json"}}).then((function(e){console.log(e);var t=e.status,n=e.ok;if(200!==t||!n)throw new Error("Response Error");return e.json()})).then((function(e){console.log(e);for(var t,o,s,a=e.results[0].formatted_address,c=0;c<e.results[0].address_components.length;c++)for(var l=0;l<e.results[0].address_components[c].types.length;l++)switch(e.results[0].address_components[c].types[l]){case"locality":t=e.results[0].address_components[c].long_name;break;case"administrative_area_level_1":o=e.results[0].address_components[c].long_name;break;case"country":s=e.results[0].address_components[c].long_name}console.log(t,o,s),console.log(a),n({formatted:a,city:t,state:o,country:s})})).catch((function(e){console.error(e),o(e)}))}))},v=n(0),y=h.b.CREDENTIAL.GOOGLE_MAP.API_KEY,_=h.b.AUCKLAND,N={disableDefaultUI:!0},A=b.b.div(o||(o=Object(d.a)(["\n  position: relative;\n  z-index: 9;\n\n  color: #fff;\n  text-align: center;\n"]))),L=b.b.div(s||(s=Object(d.a)(["\n  width: 100%;\n  height: 210px;\n  position: relative;\n\n"]))),w=b.b.div(a||(a=Object(d.a)(["\n  position: absolute;\n  right: 8px;\n  top: 4px;\n  & svg {\n    height: 62px;\n    fill: #fff;\n    stroke: ",";\n    stroke-width: 3;\n  }\n  & p {\n    position: absolute;\n    width: 100%;\n    left: 0;\n    top: 12px;\n    text-align: center;\n  }\n"])),h.e.color.primary.default);function I(e){var t=e.onClose,n=e.variant,o=void 0===n?"normal":n,s=Object(u.f)(),a=Object(p.useContext)(g.c),c=a.model,d=a.setLocation,b=a.setSensorAllowed,f=c||{},I=f.location,C=f.sensorAllowed,T=Object(O.c)({googleMapsApiKey:y,libraries:["places"]}),k=T.isLoaded,E=T.loadError,S=Object(p.useRef)(),P=Object(p.useCallback)((function(e){S.current=e}),[]),M=Object(p.useState)((null===I||void 0===I?void 0:I.position)||_),R=Object(i.a)(M,2),D=R[0],H=R[1],U=(Object(p.useCallback)((function(e){var t=e.latLng.lat(),n=e.latLng.lng();H({lat:t,lng:n})}),[]),function(){var e=Object(r.a)(l.a.mark((function e(t){var n,o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.lat,o=t.lng,e.prev=1,e.next=4,x(n,o);case 4:s=e.sent,console.log(s),d({address:{formatted:null===s||void 0===s?void 0:s.formatted,textSecondary:[null===s||void 0===s?void 0:s.city,null===s||void 0===s?void 0:s.state,null===s||void 0===s?void 0:s.country].filter((function(e){return!!e})).join(" ")},position:{lat:n,lng:o}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}());return C?Object(v.jsxs)(A,{children:[Object(v.jsx)(m.c,{height:"197px"}),Object(v.jsxs)(m.pb,{children:[Object(v.jsx)(m.i,{className:"space",padding:"0 0 32px 0"}),Object(v.jsx)("p",{style:{lineHeight:"32px"},className:"ft-ps24",dangerouslySetInnerHTML:{__html:"It's Time To Share<br />your location"}}),"share-only"!==o?null:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(m.i,{className:"space",padding:"0 0 16px 0"}),Object(v.jsxs)(m.d,{size:"medium",color:"white",fullWidth:!0,children:[Object(v.jsx)(m.o,{}),Object(v.jsx)("span",{className:"ft-pb14",children:"Location Sensor is Disabled"})]})]}),Object(v.jsx)(m.i,{className:"space",padding:"0 0 ".concat("share-only"===o?24:32,"px 0")}),Object(v.jsx)(L,{children:E?"Map load error!":k?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(O.a,{mapContainerStyle:{width:"100%",height:"100%"},zoom:(null===I||void 0===I?void 0:I.position)?16:10,center:(null===I||void 0===I?void 0:I.position)||_,options:N,onLoad:P,children:D&&Object(v.jsx)(O.b,{position:{lat:D.lat,lng:D.lng}})}),Object(v.jsxs)(w,{children:[Object(v.jsx)(m.R,{}),Object(v.jsx)("p",{className:"ft-rb12 clr-ft-primary",dangerouslySetInnerHTML:{__html:"Show the best<br/>deals around me!"}})]})]}):"Loading map ..."}),Object(v.jsx)(m.i,{className:"space",padding:"0 0 ".concat("share-only"===o?24:32,"px 0")}),Object(v.jsx)("div",{style:{padding:"0 8px"},children:Object(v.jsx)(m.d,{size:"medium",fullWidth:!0,onClick:function(){navigator.geolocation.getCurrentPosition((function(e){U({lat:e.coords.latitude,lng:e.coords.longitude}),b(!0),t&&t()}),(function(){b(!1),s.push({pathname:h.a.LOCATION_INPUT})}),{enableHighAccuracy:!0})},children:"SHARE MY LOCATION NOW"})}),"share-only"===o?Object(v.jsx)(m.i,{className:"space",padding:"0 0 24px 0"}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("p",{style:{marginTop:"16px"},className:"ft-rr12 clr-ft-gray3-76",children:"or"}),Object(v.jsx)("p",{style:{margin:"16px 0 24px"},children:Object(v.jsx)(j.b,{className:"ft-rr12 clr-ft-gray3-76",to:h.a.LOCATION_INPUT,children:"Select address manually"})})]})]})]}):Object(v.jsx)(u.a,{to:h.a.LOCATION_INPUT})}}}]);
//# sourceMappingURL=5.2ab4ff73.chunk.js.map